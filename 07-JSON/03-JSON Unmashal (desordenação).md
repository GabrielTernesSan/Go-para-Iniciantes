# JSON Unmashal (desordenação)

- Estrutura: ``` func Unmarshal(data []byte, v interface{}) error```  

  ​	Unmarshal analisa os dados codificados em JSON e armazena o resultado no valor apontado por v. Se v for nulo ou não for um ponteiro, Unmarshal retornará um InvalidUnmarshalError.

  ​	Para desempacotar JSON em uma struct, o Unmarshal combina as chaves do objeto de entrada com as chaves usadas por Marshal (o nome do campo da estrutura ou sua tag), preferindo uma correspondência exata, mas também aceitando uma correspondência sem distinção entre maiúsculas e minúsculas. Por padrão, as chaves de objeto que não têm um campo de estrutura correspondente são ignoradas. Para isso você pode usar o [JSON to Go](https://mholt.github.io/json-to-go/) .

- Exemplo:

  Vamos desordenar esse JSON ``` {"Nome":"James","Sobrenome":"Bond","Idade":40,"Profissao":"Agente Secreto","Contabancaria":1000000.5}```

  Ao colocarmos no JSON to GO esse JSON gera essa struct: 

  ``````go
  type AutoGenerated struct {
  	Nome          string  `json:"Nome"`
  	Sobrenome     string  `json:"Sobrenome"`
  	Idade         int     `json:"Idade"`
  	Profissao     string  `json:"Profissao"`
  	Contabancaria float64 `json:"Contabancaria"`
  }
  ``````

  ``````go
  package main
  
  import (
  	"encoding/json"
  	"fmt"
  )
  
  // Usamos a struct gerada pelo JSON to GO 
  type informacoes struct {
  	Nome          string  `json:"Nome"`
  	Sobrenome     string  `json:"Sobrenome"`
  	Idade         int     `json:"Idade"`
  	Profissao     string  `json:"Profissao"`
  	Contabancaria float64 `json:"Contabancaria"`
  }
  
  func main() {
  
      // Criamos uma slice of bytes, func Unmarshal(data []byte, v interface{})
  	sb := []byte(`{"Nome":"James","Sobrenome":"Bond","Idade":40,"Profissao":"Agente Secreto","Contabancaria":1000000.5}`)
  
      // Criamos uma variável
  	var jamesbond informacoes
      // A função Unmarshal retorna um erro, toma o valor da slice
      // E aponta para a variável que criamos para salvar o resultado
  	err := json.Unmarshal(sb, &jamesbond)
  	if err != nil {
  		fmt.Println("error:", err)
  	}
  
  	fmt.Println(jamesbond)
  	fmt.Println(jamesbond.Profissao)
  }
  OUTPUT:
  {James Bond 40 Agente Secreto 1.0000005e+06}
  Agente Secreto
  
  ``````

  - Tags: A codificação de cada campo de struct pode ser personalizada pela string de formato armazenada na chave "json" na tag do campo de struct. A string de formato fornece o nome do campo, possivelmente seguido por uma lista de opções separada por vírgulas. O nome pode estar vazio para especificar opções sem substituir o nome do campo padrão.

    ​	Como um caso especial, se a tag do campo for "-", o campo será sempre omitido. Observe que um campo com o nome "-" ainda pode ser gerado usando a tag "-,".

    `````go
    // O campo aparece em JSON como a chave "myName".
    Field int `json:"myName"`
    
    // O campo aparece em JSON como a chave "myName" e
    // o campo é omitido do objeto se seu valor estiver vazio,
    // conforme definido acima.
    Field int `json:"myName,omitempty"`
    
    // O campo aparece em JSON como "Campo" chave (o padrão), mas
    // o campo é ignorado se estiver vazio.
    // Observe a vírgula inicial.
    Field int `json:",omitempty"`
    
    // O campo é ignorado por este pacote.
    Field int `json:"-"`
    
    // O campo aparece em JSON como a chave "-".
    Field int `json:"-,"`
    `````